<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.M.A.R.T - Neural Network Learning Playground</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%); }
        .animate-bounce { animation: bounce 1s infinite; }
        @keyframes bounce {
            0%, 100% { transform: translateY(-25%); }
            50% { transform: none; }
        }
    </style>
</head>
<body>
    <div class="w-full max-w-7xl mx-auto p-6 gradient-bg min-h-screen">
        <!-- Header -->
        <div class="mb-8 text-center">
            <div class="flex items-center justify-center gap-3 mb-4">
                <div class="text-blue-600 text-4xl">üß†</div>
                <h1 class="text-3xl font-bold text-gray-800">S.M.A.R.T Neural Network Playground</h1>
            </div>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto mb-4">
                <strong>See Machine Adaptive Reasoning Training</strong> - Watch neural networks learn in real-time!
            </p>
            
            <!-- Project Links -->
            <div class="flex flex-wrap items-center justify-center gap-4 mb-6">
                <a href="https://github.com/ihoggan/S.M.A.R.T." target="_blank"
                   class="flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-900 text-white rounded-lg font-semibold transition-all">
                    üìÇ GitHub Repository ‚ÜóÔ∏è
                </a>
                <a href="./smart-see-machine-adaptive-reasoning-training.ipynb" download
                   class="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-all">
                    üìì Download Notebook ‚¨áÔ∏è
                </a>
                <a href="https://github.com/sponsors/ihoggan" target="_blank"
                   class="flex items-center gap-2 px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white rounded-lg font-semibold transition-all">
                    ‚ù§Ô∏è Support Project ‚ÜóÔ∏è
                </a>
            </div>
        </div>

        <!-- Control Panel -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex flex-wrap items-center justify-between gap-4">
                <div class="flex items-center gap-4">
                    <button id="trainBtn" class="flex items-center gap-2 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-all">
                        ‚ñ∂Ô∏è Start Training
                    </button>
                    <button id="resetBtn" class="flex items-center gap-2 px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-semibold transition-all">
                        üîÑ Reset Neuron
                    </button>
                </div>
                
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2 px-3 py-1 bg-gray-100 rounded-full">
                        ‚öôÔ∏è <label class="text-sm font-medium text-gray-700">Learning Rate:</label>
                        <span id="rateStatus" class="font-bold text-sm text-green-600">‚úÖ SAFE</span>
                    </div>
                    <select id="learningRate" class="px-3 py-1 border border-gray-300 rounded">
                        <option value="0.0000001">0.0000001 (Safe & Stable)</option>
                        <option value="0.000001">0.000001 (Moderate)</option>
                        <option value="0.00001">0.00001 (Fast)</option>
                        <option value="0.0001">0.0001 (‚ö†Ô∏è May Explode!)</option>
                        <option value="0.001">0.001 (üí• Definitely Explodes!)</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Status Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center gap-3 mb-2">
                    <span>‚ö°</span>
                    <h3 class="font-bold text-gray-800">Training Progress</h3>
                </div>
                <div id="epochValue" class="text-2xl font-bold text-blue-600">0</div>
                <div class="text-sm text-gray-600">epochs completed</div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center gap-3 mb-2">
                    <span>üìà</span>
                    <h3 class="font-bold text-gray-800">Accuracy</h3>
                    <div id="explosionWarning" class="hidden text-red-600 animate-bounce">üí• EXPLODING!</div>
                </div>
                <div id="accuracyValue" class="text-2xl font-bold text-green-600">0.0%</div>
                <div class="text-sm text-gray-600">prediction accuracy</div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="font-bold text-gray-800 mb-2">Price per Sqft</h3>
                <div id="priceValue" class="text-xl font-bold text-purple-600">$0</div>
                <div class="text-xs text-gray-600">Target: $200</div>
                <div id="priceError" class="text-xs text-red-500">Error: $0</div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="font-bold text-gray-800 mb-2">Base Price</h3>
                <div id="baseValue" class="text-xl font-bold text-purple-600">$0k</div>
                <div class="text-xs text-gray-600">Target: $50k</div>
                <div id="baseError" class="text-xs text-red-500">Error: $0k</div>
            </div>
        </div>

        <!-- Learning Progress Chart -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Learning Progress</h3>
            <canvas id="learningChart" width="800" height="400" class="w-full h-64"></canvas>
        </div>

        <!-- Current Predictions -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Current Predictions</h3>
            <div id="predictions" class="space-y-3">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>

        <!-- Challenge Section -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">üè† The Neural Network Challenge</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-bold text-green-600 mb-2">The Hidden Pattern</h4>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="font-mono text-lg text-center">
                            <strong>House Price = $200/sqft √ó Square Feet + $50,000</strong>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mt-2">
                        This is the secret relationship our neural network must discover!
                    </p>
                </div>
                
                <div>
                    <h4 class="font-bold text-blue-600 mb-2">Current Performance</h4>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="text-sm">
                            <div>Price/sqft: <strong id="currentPrice">$0</strong> (target: $200)</div>
                            <div>Base price: <strong id="currentBase">$0k</strong> (target: $50k)</div>
                            <div>Accuracy: <strong id="currentAccuracy">0.0%</strong></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 p-4 bg-yellow-50 rounded-lg">
                <p class="text-sm text-gray-700">
                    <strong>üéØ Your Mission:</strong> Experiment with different learning rates to help the neural network 
                    discover the hidden relationship. Watch what happens when you use learning rates that are too high!
                </p>
            </div>
        </div>

        <!-- Mathematical Explanation Section -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-6">Understanding the Mathematics</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h4 class="font-bold text-lg text-blue-600 mb-3">The Prediction Formula</h4>
                    <div class="bg-blue-50 p-4 rounded-lg font-mono text-sm">
                        predicted_price = <br>
                        &nbsp;&nbsp;price_per_sqft √ó square_feet + <br>
                        &nbsp;&nbsp;base_neighborhood_price
                    </div>
                    <p class="text-gray-600 mt-3">
                        Our neuron learns two numbers: how much each square foot adds to the price, 
                        and what the base price is for any house in this neighborhood.
                    </p>
                </div>
                
                <div>
                    <h4 class="font-bold text-lg text-green-600 mb-3">How Learning Works</h4>
                    <div class="bg-green-50 p-4 rounded-lg font-mono text-sm">
                        error = actual_price - predicted_price<br><br>
                        price_per_sqft += <br>
                        &nbsp;&nbsp;learning_rate √ó error √ó square_feet<br><br>
                        base_price += <br>
                        &nbsp;&nbsp;learning_rate √ó error
                    </div>
                    <p class="text-gray-600 mt-3">
                        When predictions are wrong, the neuron adjusts its parameters to reduce the error. 
                        Bigger houses cause bigger adjustments to the price_per_sqft parameter.
                    </p>
                </div>
            </div>

            <div class="mt-8 p-6 bg-gray-50 rounded-lg">
                <h4 class="font-bold text-lg text-purple-600 mb-3">üßÆ The Learning Process Explained</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                    <div class="text-center">
                        <div class="text-2xl mb-2">üé≤</div>
                        <div class="font-semibold">1. Random Start</div>
                        <div class="text-gray-600">Neural network begins with random parameter values</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-2">üìä</div>
                        <div class="font-semibold">2. Calculate Error</div>
                        <div class="text-gray-600">Compare predictions with actual house prices</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-2">üîß</div>
                        <div class="font-semibold">3. Adjust Parameters</div>
                        <div class="text-gray-600">Use gradients to improve predictions</div>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-yellow-50 rounded-lg border-l-4 border-yellow-400">
                    <p class="text-sm text-gray-700">
                        <strong>üí° Key Insight:</strong> The learning rate controls how big steps the neural network takes. 
                        Too small = slow learning. Too big = parameters explode! Finding the right balance is crucial 
                        for successful AI training.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Neural Network Implementation
        let isTraining = false;
        let currentEpoch = 0;
        let learningData = [];
        let neuronParams = {
            pricePerSqft: Math.random() * 100 + 150,
            basePrice: Math.random() * 50000 + 25000
        };
        let learningRate = 0.0000001;
        let trainingInterval;

        const houseData = [
            { sqft: 1000, price: 250000 },
            { sqft: 1500, price: 350000 },
            { sqft: 2000, price: 450000 },
            { sqft: 2500, price: 550000 },
            { sqft: 3000, price: 650000 }
        ];

        const TRUE_PRICE_PER_SQFT = 200;
        const TRUE_BASE_PRICE = 50000;

        function predictPrice(sqft, params = neuronParams) {
            return params.pricePerSqft * sqft + params.basePrice;
        }

        function calculateError(params = neuronParams) {
            let totalError = 0;
            houseData.forEach(house => {
                const prediction = predictPrice(house.sqft, params);
                const error = house.price - prediction;
                totalError += error * error;
            });
            return Math.sqrt(totalError / houseData.length);
        }

        function calculateAccuracy(params = neuronParams) {
            const error = calculateError(params);
            return Math.max(0, 100 - (error / 100000) * 100);
        }

        function trainOneEpoch() {
            let totalPriceGradient = 0;
            let totalBiasGradient = 0;
            
            houseData.forEach(house => {
                const prediction = predictPrice(house.sqft);
                const error = house.price - prediction;
                
                totalPriceGradient += error * house.sqft;
                totalBiasGradient += error;
            });
            
            const avgPriceGradient = totalPriceGradient / houseData.length;
            const avgBiasGradient = totalBiasGradient / houseData.length;
            
            // Check for explosion
            const gradientMagnitude = Math.abs(avgPriceGradient) + Math.abs(avgBiasGradient);
            const isExploding = gradientMagnitude > 100000 || Math.abs(neuronParams.pricePerSqft) > 1000;
            
            if (isExploding) {
                document.getElementById('explosionWarning').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('explosionWarning').classList.add('hidden');
                }, 2000);
            }
            
            // Update parameters
            neuronParams.pricePerSqft += learningRate * avgPriceGradient;
            neuronParams.basePrice += learningRate * avgBiasGradient;
            
            // Safety bounds
            neuronParams.pricePerSqft = Math.max(-10000, Math.min(10000, neuronParams.pricePerSqft));
            neuronParams.basePrice = Math.max(-10000000, Math.min(10000000, neuronParams.basePrice));
        }

        function updateDisplay() {
            const accuracy = calculateAccuracy();
            const priceError = Math.abs(neuronParams.pricePerSqft - TRUE_PRICE_PER_SQFT);
            const baseError = Math.abs(neuronParams.basePrice - TRUE_BASE_PRICE);

            document.getElementById('epochValue').textContent = currentEpoch;
            document.getElementById('accuracyValue').textContent = accuracy.toFixed(1) + '%';
            document.getElementById('priceValue').textContent = '$' + neuronParams.pricePerSqft.toFixed(0);
            document.getElementById('baseValue').textContent = '$' + (neuronParams.basePrice/1000).toFixed(0) + 'k';
            document.getElementById('priceError').textContent = 'Error: $' + priceError.toFixed(0);
            document.getElementById('baseError').textContent = 'Error: $' + (baseError/1000).toFixed(0) + 'k';
            
            // Update performance section
            document.getElementById('currentPrice').textContent = '$' + neuronParams.pricePerSqft.toFixed(0);
            document.getElementById('currentBase').textContent = '$' + (neuronParams.basePrice/1000).toFixed(0) + 'k';
            document.getElementById('currentAccuracy').textContent = accuracy.toFixed(1) + '%';

            updatePredictions();
            updateChart();
        }

        function updatePredictions() {
            const container = document.getElementById('predictions');
            container.innerHTML = '';
            
            houseData.forEach((house, index) => {
                const prediction = predictPrice(house.sqft);
                const error = Math.abs(house.price - prediction);
                const errorPercent = (error / house.price) * 100;
                
                const errorColor = errorPercent > 20 ? 'text-red-600' : 
                                 errorPercent > 10 ? 'text-yellow-600' : 'text-green-600';
                
                container.innerHTML += `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex-1">
                            <div class="font-semibold">${house.sqft} sqft</div>
                            <div class="text-sm text-gray-600">Actual: $${(house.price/1000).toFixed(0)}k</div>
                        </div>
                        <div class="flex-1 text-center">
                            <div class="font-semibold text-blue-600">$${(prediction/1000).toFixed(0)}k</div>
                            <div class="text-sm text-gray-600">Predicted</div>
                        </div>
                        <div class="flex-1 text-right">
                            <div class="font-semibold ${errorColor}">${errorPercent.toFixed(1)}%</div>
                            <div class="text-sm text-gray-600">Error</div>
                        </div>
                    </div>
                `;
            });
        }

        function updateChart() {
            const canvas = document.getElementById('learningChart');
            const ctx = canvas.getContext('2d');
            
            // Set canvas to high DPI for crisp rendering
            const rect = canvas.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            
            // Clear canvas
            ctx.clearRect(0, 0, rect.width, rect.height);
            
            if (learningData.length < 2) return;
            
            // Anti-aliasing for smooth lines
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';
            
            // Draw grid
            ctx.strokeStyle = '#f3f4f6';
            ctx.lineWidth = 1;
            
            // Grid lines
            for (let i = 1; i < 5; i++) {
                // Horizontal grid lines
                const y = 20 + (i * (rect.height - 70) / 5);
                ctx.beginPath();
                ctx.moveTo(50, y);
                ctx.lineTo(rect.width - 20, y);
                ctx.stroke();
                
                // Vertical grid lines
                const x = 50 + (i * (rect.width - 70) / 5);
                ctx.beginPath();
                ctx.moveTo(x, 20);
                ctx.lineTo(x, rect.height - 50);
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = '#d1d5db';
            ctx.lineWidth = 2;
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(50, 20);
            ctx.lineTo(50, rect.height - 50);
            ctx.stroke();
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(50, rect.height - 50);
            ctx.lineTo(rect.width - 20, rect.height - 50);
            ctx.stroke();
            
            // Draw accuracy line with smooth curves
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.beginPath();
            
            const maxEpoch = Math.max(...learningData.map(d => d.epoch));
            const maxAccuracy = 100;
            
            learningData.forEach((point, index) => {
                const x = 50 + (point.epoch / maxEpoch) * (rect.width - 70);
                const y = rect.height - 50 - (point.accuracy / maxAccuracy) * (rect.height - 70);
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // Add y-axis labels
            ctx.fillStyle = '#6b7280';
            ctx.font = '12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
            ctx.textAlign = 'right';
            
            for (let i = 0; i <= 5; i++) {
                const accuracy = (i * 20);
                const y = rect.height - 50 - (accuracy / 100) * (rect.height - 70);
                ctx.fillText(accuracy + '%', 45, y + 4);
            }
            
            // Add x-axis labels
            ctx.textAlign = 'center';
            for (let i = 0; i <= 5; i++) {
                const epoch = Math.round((i * maxEpoch) / 5);
                const x = 50 + (i * (rect.width - 70) / 5);
                ctx.fillText(epoch.toString(), x, rect.height - 30);
            }
            
            // Add axis titles
            ctx.fillStyle = '#374151';
            ctx.font = 'bold 14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('Epoch', rect.width / 2, rect.height - 5);
            
            ctx.save();
            ctx.translate(15, rect.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Accuracy (%)', 0, 0);
            ctx.restore();
        }

        function startTraining() {
            if (isTraining) {
                isTraining = false;
                clearInterval(trainingInterval);
                document.getElementById('trainBtn').innerHTML = '‚ñ∂Ô∏è Start Training';
                document.getElementById('trainBtn').className = document.getElementById('trainBtn').className.replace('bg-red-500 hover:bg-red-600', 'bg-green-500 hover:bg-green-600');
                return;
            }
            
            isTraining = true;
            currentEpoch = 0;
            learningData = [];
            
            // Add initial data point
            learningData.push({
                epoch: 0,
                accuracy: calculateAccuracy()
            });
            
            document.getElementById('trainBtn').innerHTML = '‚è∏Ô∏è Pause Training';
            document.getElementById('trainBtn').className = document.getElementById('trainBtn').className.replace('bg-green-500 hover:bg-green-600', 'bg-red-500 hover:bg-red-600');
            
            trainingInterval = setInterval(() => {
                currentEpoch++;
                
                if (currentEpoch >= 200) {
                    isTraining = false;
                    clearInterval(trainingInterval);
                    document.getElementById('trainBtn').innerHTML = '‚ñ∂Ô∏è Start Training';
                    document.getElementById('trainBtn').className = document.getElementById('trainBtn').className.replace('bg-red-500 hover:bg-red-600', 'bg-green-500 hover:bg-green-600');
                    return;
                }
                
                trainOneEpoch();
                
                learningData.push({
                    epoch: currentEpoch,
                    accuracy: calculateAccuracy()
                });
                
                updateDisplay();
            }, 100);
        }

        function resetNeuron() {
            isTraining = false;
            clearInterval(trainingInterval);
            currentEpoch = 0;
            learningData = [];
            
            neuronParams = {
                pricePerSqft: Math.random() * 100 + 150,
                basePrice: Math.random() * 50000 + 25000
            };
            
            document.getElementById('trainBtn').innerHTML = '‚ñ∂Ô∏è Start Training';
            document.getElementById('trainBtn').className = 'flex items-center gap-2 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-all';
            
            updateDisplay();
        }

        function updateLearningRateStatus() {
            const statusElement = document.getElementById('rateStatus');
            
            if (learningRate <= 0.0000001) {
                statusElement.textContent = '‚úÖ SAFE';
                statusElement.className = 'font-bold text-sm text-green-600';
            } else if (learningRate <= 0.000001) {
                statusElement.textContent = 'üìà STABLE';
                statusElement.className = 'font-bold text-sm text-blue-600';
            } else if (learningRate <= 0.00001) {
                statusElement.textContent = '‚ö° FAST';
                statusElement.className = 'font-bold text-sm text-yellow-600';
            } else if (learningRate <= 0.0001) {
                statusElement.textContent = '‚ö†Ô∏è RISKY';
                statusElement.className = 'font-bold text-sm text-orange-600';
            } else {
                statusElement.textContent = 'üí• BOOM!';
                statusElement.className = 'font-bold text-sm text-red-600';
            }
        }

        // Event listeners
        document.getElementById('trainBtn').addEventListener('click', startTraining);
        document.getElementById('resetBtn').addEventListener('click', resetNeuron);
        document.getElementById('learningRate').addEventListener('change', (e) => {
            learningRate = parseFloat(e.target.value);
            updateLearningRateStatus();
        });

        // Initialize
        updateDisplay();
        updateLearningRateStatus();
    </script>
</body>
</html>
